/** ! created at <%= grunt.template.today("yyyy-mm-dd") by cqb %> */
define(["module","react","react-dom","classnames","core/BaseComponent","Core","utils/strings","utils/Dom","FontIcon","utils/grids","FormControl"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function n(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=(g.substitute,b.PropTypes),q=j.getGrid,r=function(a){function e(a){l(this,e);var b=m(this,Object.getPrototypeOf(e).call(this,a));return b.addState({fileName:null,status:!1}),b}return n(e,a),o(e,[{key:"selectedFile",value:function(a){var b=c.findDOMNode(this.refs.file),d=b.value,e=d.lastIndexOf("\\");d=d.substr(e+1),this.setState({fileName:d}),h.attr(b,"title",d),this.props.onChange&&this.props.onChange(d,b)}},{key:"getValue",value:function(){return this.state.fileName}},{key:"render",value:function(){var a=this.props,c=a.disabled,e=a.readOnly,f=a.className,g=a.style,h=a.grid;f=d("cm-upload",f,q(h),{disabled:c||e});var j="upload",k=this.state.fileName||this.props.placeHolder;return k=b.createElement("div",{className:"cm-upload-fileName"},k),b.createElement("div",{className:f,style:g},b.createElement("input",{type:"file",name:this.props.name,ref:"file",onChange:this.selectedFile.bind(this),className:"cm-upload-pick-helper"}),b.createElement("div",{className:"cm-upload-pick-btn"},k),b.createElement(i,{icon:j,title:"上传",ref:"uploadBtn"}))}}]),e}(e);r.propTypes={value:p.string,className:p.string,disabled:p.bool,readOnly:p.bool,multi:p.bool,style:p.object,placeholder:p.string},k.register(r,"file"),a.exports=r});