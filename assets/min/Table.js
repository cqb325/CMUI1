/** ! created at <%= grunt.template.today("yyyy-mm-dd") by cqb %> */
define(["module","react","Core","classnames","core/BaseComponent","moment","utils/Dom"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=b.PropTypes,m=function(a){function e(a){h(this,e);var b=i(this,Object.getPrototypeOf(e).call(this,a));return b.addState({data:a.data||[],header:a.header}),b}return j(e,a),k(e,[{key:"setData",value:function(a){this.setState({data:a})}},{key:"resetData",value:function(a){this.setState({header:a.header,data:a.data})}},{key:"_renderHeader",value:function(){var a=this.state.header,c=void 0;return a&&(c=a.map(function(a,c){return a.hide?null:b.createElement("th",{key:"header_"+c,className:a.className,width:a.width,name:a.name},a.text)})),b.createElement("thead",null,b.createElement("tr",null,c))}},{key:"_renderBody",value:function(){var a=this.state.data,c=this.state.header,d=void 0;return a&&a.length&&c&&(d=a.map(function(a,d){var e=c.map(function(c,e){if(c.hide)return null;var f=a[c.name];f=this._formatData(f,c,a);var h="";return b.isValidElement(f)?(c.tip&&(h=f.props.children),b.createElement("td",{key:"cell_"+d+"_"+e,title:h},f)):(f instanceof Array&&(f=f.join(""),c.tip=!1),c.tip&&(h=f+"","<"==h.charAt(0)&&(h=g.dom(h).text())),b.createElement("td",{key:"cell_"+d+"_"+e,title:h,dangerouslySetInnerHTML:{__html:f}}))},this);return b.createElement("tr",{key:"row_"+d},e)},this)),b.createElement("tbody",null,d)}},{key:"_formatData",value:function(a,b,d){if(b.format){var f=void 0;c.isFunction(b.format)?f=b.format:c.isString(b.format)&&(f=e.Formats[b.format]),f&&(a=f(a,b,d))}return a}},{key:"render",value:function(){var a=d("cm-table","table",this.props.className,{"table-bordered":this.props.bordered,"table-striped":this.props.striped,"table-hover":this.props.hover}),c=this._renderHeader(),e=this._renderBody();return b.createElement("div",{className:"table-responsive"},b.createElement("table",{className:a,style:this.props.style},c,e))}}]),e}(e);m.propTypes={data:l.array,header:l.array,width:l.string,height:l.string,bordered:l.bool,striped:l.bool,hover:l.bool},m.Formats={DateFormat:function(a,b,c){return a?f(a).format("YYYY-MM-DD"):""},DateTimeFormat:function(a,b,c){return a?f(a).format("YYYY-MM-DD HH:mm:ss"):""}},a.exports=m});