/** ! created at <%= grunt.template.today("yyyy-mm-dd") by cqb %> */
define(["module","react","classnames","moment","core/BaseComponent"],function(a,b,c,d,e){"use strict";function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a){function c(a){f(this,c);var b=g(this,Object.getPrototypeOf(c).call(this,a)),e=a.value?d(a.value):"";return""===e&&(e=d(),e.set("hour",0),e.set("minute",0),e.set("second",0)),b.state={current:e},b}return h(c,a),i(c,[{key:"componentWillReceiveProps",value:function(a){a.value!==this.props.value&&this.setState({current:d(a.value)})}},{key:"_renderNumbers",value:function(){for(var a=[],c=130,d=Math.PI/6,e=1;e<=12;e++){var f=Math.sin(d*e),g=Math.cos(d*e),h=8/c/2,i=8/c/2,j={left:c*(.5+f/2-h)+"px",top:c*(.5-g/2-i)+"px"};a.push(b.createElement("span",{key:e,style:j},e))}return a}},{key:"_renderHands",value:function(){var a=this.state.current,c=a.get("hour"),d=a.get("minute"),e=a.get("second"),f=-90+6*e,g=-90+6*(d+e/60),h=-90+30*(c+d/60+e/3600),i={transform:"rotateZ("+f+"deg)"},j={transform:"rotateZ("+g+"deg)"},k={transform:"rotateZ("+h+"deg)"};return this.isLtIE9()&&(this._calcFilter(f,i,52),this._calcFilter(g,j,42),this._calcFilter(h,k,32)),b.createElement("div",{className:"click-hands"},b.createElement("div",{className:"hourHand",style:k}),b.createElement("div",{className:"minuteHand",style:j}),b.createElement("div",{className:"secondHand",style:i}))}},{key:"_calcFilter",value:function(a,b,c){var d=a*(Math.PI/180),e=Math.cos(d),f=-1*Math.sin(d),g=Math.sin(d),h=e,i=e,j=g;a>270&&(a-=360),a<0&&a>=-90?(i=0,j=g*c):a>=0&&a<=90?(i=-8*e,j=2*-g):a>90&&a<=180?(i=c*e,j=-1):a>180&&a<=270&&(i=c*e,j=g*c),b.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+e+",M12="+f+",M21="+g+",M22="+h+",SizingMethod='auto expand')",b.marginTop=j+"px",b.marginLeft=i+"px"}},{key:"setValue",value:function(a){var b={time:a};this.props.onChange&&this.props.onChange(b)}},{key:"close",value:function(){this.props.onTimeClose&&this.props.onTimeClose()}},{key:"addHour",value:function(){var a=this.state.current;a.add(1,"hour"),this.setValue(a)}},{key:"subHour",value:function(){var a=this.state.current;a.add(-1,"hour"),this.setValue(a)}},{key:"addMinute",value:function(){var a=this.state.current;a.add(1,"minute"),this.setValue(a)}},{key:"subMinute",value:function(){var a=this.state.current;a.add(-1,"minute"),this.setValue(a)}},{key:"addSecond",value:function(){var a=this.state.current;a.add(1,"second"),this.setValue(a)}},{key:"subSecond",value:function(){var a=this.state.current;a.add(-1,"second"),this.setValue(a)}},{key:"getTime",value:function(){return this.state.current.format("HH:mm:ss")}},{key:"render",value:function(){var a=this._renderNumbers(),c=this._renderHands(),d=this.state.current,e=d.get("hour"),f=d.get("minute"),g=d.get("second"),h="time"===this.props.view?"":b.createElement("div",{className:"clock-close",onClick:this.close.bind(this)},b.createElement("span",{className:"fa-stack text-center"},b.createElement("i",{className:"fa fa-circle-o fa-stack-2x"}),b.createElement("i",{className:"fa fa-close fa-stack-1x"})));return b.createElement("div",{className:"clock-container"},h,b.createElement("div",{className:"clock-face"},b.createElement("div",{className:"clock-numbers"},a),c),b.createElement("div",{className:"spinners"},b.createElement("div",{className:"hourSpinner spinner"},b.createElement("span",{className:"spinner-value"},e),b.createElement("span",{className:"spinner-plus",onClick:this.addHour.bind(this)},b.createElement("i",{className:"fa fa-angle-up"})),b.createElement("span",{className:"spinner-subs",onClick:this.subHour.bind(this)},b.createElement("i",{className:"fa fa-angle-down"}))),b.createElement("div",{className:"minuteSpinner spinner"},b.createElement("span",{className:"spinner-value"},f),b.createElement("span",{className:"spinner-plus",onClick:this.addMinute.bind(this)},b.createElement("i",{className:"fa fa-angle-up"})),b.createElement("span",{className:"spinner-subs",onClick:this.subMinute.bind(this)},b.createElement("i",{className:"fa fa-angle-down"}))),b.createElement("div",{className:"secondSpinner spinner"},b.createElement("span",{className:"spinner-value"},g),b.createElement("span",{className:"spinner-plus",onClick:this.addSecond.bind(this)},b.createElement("i",{className:"fa fa-angle-up"})),b.createElement("span",{className:"spinner-subs",onClick:this.subSecond.bind(this)},b.createElement("i",{className:"fa fa-angle-down"})))))}}]),c}(e);a.exports=j});