/** ! created at <%= grunt.template.today("yyyy-mm-dd") by cqb %> */
define(["module","react","react-dom","classnames","core/BaseComponent","utils/Dom","Panel","Button"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var l=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=b.PropTypes,o=(b.addons.createFragment,function(a){function e(a){i(this,e);var c=j(this,Object.getPrototypeOf(e).call(this,a));c.addState({title:a.title||"",msg:a.msg||"",visibility:!1,type:a.type||"info"}),c.confirm=c.confirm.bind(c),c.cancle=c.cancle.bind(c);var d=[b.createElement(h,{theme:"success",raised:!0,icon:"check",onClick:c.confirm},"确 定")];return"confirm"===a.type&&d.push(b.createElement(h,{theme:"info",raised:!0,icon:"close",className:"ml-10",onClick:c.cancle},"取 消")),c.footers={components:d},c.backdrop=null,c.data=null,c}return k(e,a),m(e,[{key:"setData",value:function(a){this.data=a}},{key:"getData",value:function(){return this.data}},{key:"cancle",value:function(){"confirm"===this.state.type&&this.props.confirm?(this.props.confirm.apply(this,[!1]),this.hide()):this.hide()}},{key:"hide",value:function(){this.setState({visibility:!1}),this.props.onHide&&this.props.onHide(),this.emit("hide"),this.backdrop.style.display="none"}},{key:"confirm",value:function(){this.props.confirm?"confirm"===this.state.type?this.props.confirm.apply(this,[!0])&&this.hide():(this.props.confirm.apply(this,[]),this.hide()):this.hide()}},{key:"show",value:function(a,b){var d=this;if(this.setState({title:this.state.title||b,msg:a,visibility:!0}),!this.backdrop){var e=f.query(".shadow-backdrop");e?this.backdrop=e:(this.backdrop=document.createElement("div"),this.backdrop.setAttribute("class","shadow-backdrop"),document.body.appendChild(this.backdrop))}this.backdrop.style.display="block",window.setTimeout(function(){var a=c.findDOMNode(d),b=a.clientWidth,e=a.clientHeight;a.style.marginLeft=-b/2+"px",a.style.marginTop=-e/2+"px",d.props.onShow&&d.props.onShow(),d.emit("show")},0)}},{key:"render",value:function(){var a=this.props,c=a.className,e=a.style;c=d("cm-messageBox",c,this.state.type);var f=l({},this.props);f.className=c;var h=e||{};return h.display=this.state.visibility?"block":"none",f.style=h,f.footers=this.footers,b.createElement(g,l({},f,{content:this.state.msg}))}}]),e}(e));o.propTypes={title:n.string,msg:n.string,type:n.oneOf(["info","confirm","error","warning"]),className:n.string,style:n.object},a.exports=o});