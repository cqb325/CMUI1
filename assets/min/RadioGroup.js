/** ! created at <%= grunt.template.today("yyyy-mm-dd") by cqb %> */
define(["module","react","classnames","core/BaseComponent","CheckBox","core/Ajax","Core","FormControl"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=b.PropTypes,n=function(a){function d(a){i(this,d);var b=j(this,Object.getPrototypeOf(d).call(this,a)),c=a.data?g.clone(a.data):null;return b.addState({data:c,value:a.value||""}),b._lastChecked=null,b}return k(d,a),l(d,[{key:"handleChange",value:function(a,b,c,d){var e=this.props,f=e.readOnly,g=e.disabled;f||g||(this._lastChecked&&this._lastChecked._node.updateState({checked:!1}),this._lastChecked=d,this.handleTrigger(a))}},{key:"handleTrigger",value:function(a){this.state.value=a,this.props.onChange&&this.props.onChange(a),this.emit("change",a)}},{key:"setValue",value:function(a){this.setState({value:a})}},{key:"getValue",value:function(){return this.state.value}},{key:"_renderItems",value:function(){var a=this.state.data||[],c=this.props,d=c.valueField,f=c.textField,g=this.state.value,h=this.props.name||"radio_"+(new Date).getTime();return a.map(function(a,c){var i=d?d:"id",j=f?f:"text",k=a[i],l=a[j],m=g==k;return m&&(this._lastChecked=a),b.createElement(e,{key:c,disabled:this.props.disabled,readOnly:this.props.readOnly,type:"radio",value:k,label:l,checked:m,item:a,name:h,onChange:this.handleChange.bind(this)})},this)}},{key:"componentWillMount",value:function(){var a=this;this.props.url&&!function(){var b=a;f.get(a.props.url,{},function(a,c){b.setState({data:a})})}()}},{key:"render",value:function(){var a=this.props,d=a.className,e=(a.name,a.layout);return d=c(d,"cm-radio-group",{stack:"stack"==e}),b.createElement("span",{className:d},this._renderItems())}}]),d}(d);n.defaultProps={layout:"inline"},n.propTypes={data:m.array,url:m.string,value:m.string,readOnly:m.bool,disabled:m.bool,name:m.string,className:m.string,layout:m.oneOf(["inline","stack"]),valueField:m.string,textField:m.string,onChange:m.func},h.register(n,"radio","array"),a.exports=n});